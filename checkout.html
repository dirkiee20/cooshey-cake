<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="checkout.css" />
    <title>Checkout | Cooshey Cake n' arts</title>
  </head>
  <body>
    <div class="cart-page-header">
      <a href="cart.html" class="btn btn--back">
        <i class="ri-arrow-left-line"></i> Back to Cart
      </a>
    </div>

    <header class="section__container cart__header">
      <h2 class="section__header">Checkout</h2>
      <p class="section__description">
        Please fill in your details to complete your order.
      </p>
      <!-- Progress indicator -->
      <div class="progress-indicator" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="2">
        <div class="progress-step active">
          <span class="step-number">1</span>
          <span class="step-label">Order Details</span>
        </div>
        <div class="progress-step">
          <span class="step-number">2</span>
          <span class="step-label">Payment Proof</span>
        </div>
      </div>
    </header>

    <section class="section__container checkout__container">
      <div class="checkout__form">
        <form id="checkout-form" novalidate>
          <!-- CSRF Token (placeholder - implement server-side generation) -->
          <input type="hidden" name="csrf_token" id="csrf_token" value="" />
          
          <h3>Shipping Information</h3>
          
          <div class="form-group">
            <label for="street">
              Street Address <span class="required" aria-label="required">*</span>
            </label>
            <input 
              type="text" 
              id="street" 
              name="street"
              autocomplete="street-address"
              required 
              aria-required="true"
              aria-describedby="street-error"
              aria-invalid="false"
            />
            <span id="street-error" class="error-message" role="alert"></span>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city">
                City <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="text" 
                id="city" 
                name="city"
                autocomplete="address-level2"
                required 
                aria-required="true"
                aria-describedby="city-error"
                aria-invalid="false"
              />
              <span id="city-error" class="error-message" role="alert"></span>
            </div>

            <div class="form-group">
              <label for="province">
                Province <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="text" 
                id="province" 
                name="province"
                autocomplete="address-level1"
                required 
                aria-required="true"
                aria-describedby="province-error"
                aria-invalid="false"
              />
              <span id="province-error" class="error-message" role="alert"></span>
            </div>
          </div>

          <div class="form-group">
            <label for="postal">
              Postal Code <span class="required" aria-label="required">*</span>
            </label>
            <input 
              type="text" 
              id="postal" 
              name="postal"
              autocomplete="postal-code"
              inputmode="numeric"
              pattern="[0-9]{4}"
              maxlength="4"
              required 
              aria-required="true"
              aria-describedby="postal-error postal-help"
              aria-invalid="false"
            />
            <span id="postal-help" class="help-text">Enter 4-digit postal code</span>
            <span id="postal-error" class="error-message" role="alert"></span>
          </div>

          <div class="form-group">
            <label for="contact">
              Contact Number <span class="required" aria-label="required">*</span>
            </label>
            <input 
              type="tel" 
              id="contact" 
              name="contact"
              autocomplete="tel"
              inputmode="tel"
              pattern="09[0-9]{9}"
              maxlength="11"
              placeholder="09XX-XXX-XXXX"
              required 
              aria-required="true"
              aria-describedby="contact-error contact-help"
              aria-invalid="false"
            />
            <span id="contact-help" class="help-text">Format: 09XXXXXXXXX (11 digits)</span>
            <span id="contact-error" class="error-message" role="alert"></span>
          </div>

          <h3>Payment Information</h3>
          <div class="payment-info-box">
            <p><strong>Account Number:</strong></p>
            <div class="account-display">
              <span id="account-number" aria-label="Account number">09123456789</span>
              <button 
                type="button" 
                class="btn-copy" 
                id="copy-btn"
                aria-label="Copy account number to clipboard"
              >
                <i class="ri-file-copy-line" aria-hidden="true"></i> Copy
              </button>
            </div>
            <p class="account-name"><strong>Account Name:</strong> Cooshey Cake n' Arts</p>
            <p class="payment-instruction">
              Send the exact amount shown in the order summary to this account number, 
              then upload your receipt on the next step.
            </p>
          </div>

          <button 
            type="submit" 
            id="place-order-button" 
            class="btn btn--primary btn--place-order"
            aria-label="Place order and proceed to payment proof upload"
          >
            <span class="btn-text">Place Order</span>
            <span class="btn-loader" aria-hidden="true"></span>
          </button>
        </form>
      </div>

      <div class="checkout__summary">
        <h3>Order Summary</h3>
        <div id="order-summary-items" role="list">
          <!-- Order summary items will be dynamically inserted here -->
        </div>
        <div class="summary__details">
          <p>Subtotal: <span id="subtotal">₱0.00</span></p>
          <p>Taxes (10%): <span id="taxes">₱0.00</span></p>
          <p class="total">Total: <span id="total">₱0.00</span></p>
        </div>
      </div>
    </section>

    <!-- Payment Upload Section -->
    <section class="section__container" id="uploadSection" style="display: none;">
      <div class="upload__section">
        <h3>Upload Payment Proof</h3>
        <p>Please upload your payment receipt to complete the order.</p>
        
        <form id="paymentForm" enctype="multipart/form-data" novalidate>
          <!-- CSRF Token -->
          <input type="hidden" name="csrf_token" id="csrf_token_upload" value="" />
          
          <div class="form-group">
            <label for="receipt">
              Payment Receipt <span class="required" aria-label="required">*</span>
            </label>
            <input 
              type="file" 
              id="receipt" 
              name="receipt" 
              accept="image/jpeg,image/png,image/jpg"
              required 
              aria-required="true"
              aria-describedby="receipt-error receipt-help"
              aria-invalid="false"
            />
            <span id="receipt-help" class="help-text">
              Accepted formats: JPG, PNG (max 5MB)
            </span>
            <span id="receipt-error" class="error-message" role="alert"></span>
          </div>

          <div class="form-group">
            <label for="reference">Reference Number (optional)</label>
            <input 
              type="text" 
              id="reference" 
              name="reference" 
              maxlength="50"
              aria-describedby="reference-help"
            />
            <span id="reference-help" class="help-text">
              Enter transaction reference if available
            </span>
          </div>

          <button 
            type="submit" 
            class="btn btn--primary"
            id="submit-payment-btn"
            aria-label="Submit payment proof"
          >
            <span class="btn-text">Submit Payment Proof</span>
            <span class="btn-loader" aria-hidden="true"></span>
          </button>
        </form>

        <div id="uploadStatus" style="display: none;" role="alert" aria-live="polite"></div>
      </div>
    </section>

    <footer class="footer__container">
      <div class="footer__bar">
        <p>
          <i class="ri-lock-line" aria-hidden="true"></i> 
          Secure checkout powered by SSL encryption
        </p>
        <p>Copyright © 2025 Cooshey Cake n' Arts. All rights reserved.</p>
      </div>
    </footer>

    <script src="checkout.js"></script>
  </body>
</html>
