<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="checkout.css" />
    <link rel="stylesheet" href="payment-proof.css" />
    <title>Upload Payment Proof | Cooshey Cake n' arts</title>
  </head>
  <body>
    <div class="cart-page-header">
      <a href="checkout.html" class="btn btn--back">
        <i class="ri-arrow-left-line"></i> Back to Checkout
      </a>
    </div>

    <header class="section__container payment__header">
      <div class="order-confirmation">
        <div class="success-icon">
          <i class="ri-checkbox-circle-fill" aria-hidden="true"></i>
        </div>
        <h1 class="confirmation-title">Order Placed Successfully!</h1>
        <p class="order-number">
          Order #<span id="orderNumber">ORD-2025-001234</span>
        </p>
        <p class="confirmation-message">
          Thank you for your order! Please upload your payment proof below to complete the transaction.
        </p>
      </div>

      <!-- Progress indicator -->
      <div class="progress-indicator" role="progressbar" aria-valuenow="2" aria-valuemin="1" aria-valuemax="2">
        <div class="progress-step completed">
          <span class="step-number">
            <i class="ri-check-line" aria-hidden="true"></i>
          </span>
          <span class="step-label">Order Details</span>
        </div>
        <div class="progress-step active">
          <span class="step-number">2</span>
          <span class="step-label">Payment Proof</span>
        </div>
      </div>
    </header>

    <section class="section__container payment-proof__container">
      <!-- Order Summary Card -->
      <div class="order-summary-card">
        <h2>Order Summary</h2>
        <div class="order-details">
          <div class="detail-row">
            <span class="detail-label">Order Date:</span>
            <span class="detail-value" id="orderDate">November 15, 2025</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Estimated Delivery:</span>
            <span class="detail-value" id="deliveryDate">November 20-22, 2025</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Shipping Address:</span>
            <span class="detail-value" id="shippingAddress">
              123 Main Street, Manila, Metro Manila 1000
            </span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Contact Number:</span>
            <span class="detail-value" id="contactNumber">09123456789</span>
          </div>
        </div>

        <div class="order-items" id="orderItems">
          <h3>Items Ordered</h3>
          <div class="item-list" role="list">
            <!-- Items will be dynamically inserted -->
          </div>
        </div>

        <div class="order-total">
          <div class="total-row">
            <span>Subtotal:</span>
            <span id="subtotalAmount">₱0.00</span>
          </div>
          <div class="total-row">
            <span>Taxes (10%):</span>
            <span id="taxAmount">₱0.00</span>
          </div>
          <div class="total-row total-final">
            <span>Total Amount:</span>
            <span id="totalAmount">₱0.00</span>
          </div>
        </div>
      </div>

      <!-- Payment Upload Card -->
      <div class="payment-upload-card">
        <h2>Upload Payment Proof</h2>
        
        <div class="payment-instructions">
          <div class="instruction-icon">
            <i class="ri-information-line" aria-hidden="true"></i>
          </div>
          <div class="instruction-content">
            <h3>Payment Instructions</h3>
            <ol>
              <li>Send the <strong>exact amount</strong> shown above to the account number provided</li>
              <li>Take a clear photo of your payment receipt or screenshot</li>
              <li>Upload the receipt using the form below</li>
              <li>Include the transaction reference number if available</li>
            </ol>
          </div>
        </div>

        <div class="payment-account-info">
          <div class="account-detail">
            <span class="account-label">Account Number:</span>
            <div class="account-value">
              <span id="accountNumber">09123456789</span>
              <button 
                type="button" 
                class="btn-copy-small" 
                id="copyAccountBtn"
                aria-label="Copy account number to clipboard"
              >
                <i class="ri-file-copy-line" aria-hidden="true"></i>
              </button>
            </div>
          </div>
          <div class="account-detail">
            <span class="account-label">Account Name:</span>
            <span class="account-value">Cooshey Cake n' Arts</span>
          </div>
          <div class="account-detail">
            <span class="account-label">Payment Method:</span>
            <span class="account-value">GCash / Bank Transfer</span>
          </div>
        </div>

        <form id="paymentProofForm" enctype="multipart/form-data" novalidate>
          <!-- CSRF Token -->
          <input type="hidden" name="csrf_token" id="csrf_token" value="" />
          <input type="hidden" name="order_id" id="order_id" value="" />

          <div class="form-group">
            <label for="receipt">
              Payment Receipt/Screenshot <span class="required" aria-label="required">*</span>
            </label>
            
            <div class="file-upload-area" id="fileUploadArea">
              <input 
                type="file" 
                id="receipt" 
                name="receipt" 
                accept="image/jpeg,image/png,image/jpg"
                required 
                aria-required="true"
                aria-describedby="receipt-error receipt-help"
                aria-invalid="false"
                class="file-input"
              />
              <label for="receipt" class="file-upload-label">
                <div class="upload-icon">
                  <i class="ri-upload-cloud-2-line" aria-hidden="true"></i>
                </div>
                <div class="upload-text">
                  <span class="upload-primary">Click to upload or drag and drop</span>
                  <span class="upload-secondary">JPG, PNG (max 5MB)</span>
                </div>
              </label>
              <div class="file-preview" id="filePreview" style="display: none;">
                <img id="previewImage" alt="Receipt preview" />
                <button 
                  type="button" 
                  class="btn-remove-file" 
                  id="removeFileBtn"
                  aria-label="Remove uploaded file"
                >
                  <i class="ri-close-line" aria-hidden="true"></i>
                </button>
              </div>
            </div>
            
            <span id="receipt-help" class="help-text">
              <i class="ri-information-line" aria-hidden="true"></i>
              Please ensure the receipt is clear and all details are visible (amount, date, reference number)
            </span>
            <span id="receipt-error" class="error-message" role="alert"></span>
          </div>

          <div class="form-group">
            <label for="reference">
              Transaction Reference Number
              <span class="optional-label">(optional)</span>
            </label>
            <input 
              type="text" 
              id="reference" 
              name="reference" 
              maxlength="50"
              placeholder="e.g., REF123456789"
              aria-describedby="reference-help"
            />
            <span id="reference-help" class="help-text">
              Enter the reference number from your payment transaction if available
            </span>
          </div>

          <div class="form-group">
            <label for="payment-method">
              Payment Method Used <span class="required" aria-label="required">*</span>
            </label>
            <select 
              id="payment-method" 
              name="payment_method" 
              required
              aria-required="true"
              aria-describedby="payment-method-error"
              aria-invalid="false"
            >
              <option value="">Select payment method</option>
              <option value="gcash">GCash</option>
              <option value="bank-transfer">Bank Transfer</option>
              <option value="paymaya">PayMaya</option>
              <option value="other">Other</option>
            </select>
            <span id="payment-method-error" class="error-message" role="alert"></span>
          </div>

          <div class="form-group">
            <label for="notes">Additional Notes <span class="optional-label">(optional)</span></label>
            <textarea 
              id="notes" 
              name="notes" 
              rows="3"
              maxlength="500"
              placeholder="Any additional information about your payment..."
              aria-describedby="notes-help"
            ></textarea>
            <span id="notes-help" class="help-text">
              <span id="charCount">0</span>/500 characters
            </span>
          </div>

          <div class="form-actions">
            <button 
              type="submit" 
              class="btn btn--primary btn--submit"
              id="submitBtn"
              aria-label="Submit payment proof"
            >
              <span class="btn-text">
                <i class="ri-check-line" aria-hidden="true"></i>
                Submit Payment Proof
              </span>
              <span class="btn-loader" aria-hidden="true"></span>
            </button>
          </div>
        </form>

        <div id="uploadStatus" style="display: none;" role="alert" aria-live="polite"></div>

        <div class="help-section">
          <h3>Need Help?</h3>
          <p>If you encounter any issues uploading your payment proof, please contact our support team:</p>
          <div class="contact-options">
            <a href="tel:+639123456789" class="contact-link">
              <i class="ri-phone-line" aria-hidden="true"></i>
              <span>0912-345-6789</span>
            </a>
            <a href="mailto:support@coosheycake.com" class="contact-link">
              <i class="ri-mail-line" aria-hidden="true"></i>
              <span>support@coosheycake.com</span>
            </a>
            <a href="https://facebook.com/coosheycake" class="contact-link" target="_blank" rel="noopener noreferrer">
              <i class="ri-facebook-line" aria-hidden="true"></i>
              <span>Facebook Messenger</span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Success Modal -->
    <div id="successModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="display: none;">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-icon success">
            <i class="ri-checkbox-circle-fill" aria-hidden="true"></i>
          </div>
          <h2 id="modalTitle">Payment Proof Submitted!</h2>
        </div>
        <div class="modal-body">
          <p>Thank you! Your payment proof has been successfully uploaded.</p>
          <p>We will verify your payment and notify you once your order is confirmed.</p>
          <p><strong>Note:</strong> Your cart has been cleared as the order has been placed. The items shown above are from your order confirmation.</p>
          <p><strong>Admin:</strong> The uploaded image will appear in the admin payments tab after the admin refreshes their page.</p>
          <div class="confirmation-details">
            <p><strong>Order Number:</strong> <span id="modalOrderNumber"></span></p>
            <p><strong>Estimated Verification Time:</strong> 1-2 business hours</p>
          </div>
        </div>
        <div class="modal-footer">
          <a href="index.html" class="btn btn--primary">
            <i class="ri-home-line" aria-hidden="true"></i>
            Return to Home
          </a>
          <a href="orders.html" class="btn btn--secondary">
            <i class="ri-file-list-line" aria-hidden="true"></i>
            View My Orders
          </a>
        </div>
      </div>
    </div>

    <footer class="footer__container">
      <div class="footer__bar">
        <p>
          <i class="ri-lock-line" aria-hidden="true"></i> 
          Your payment information is securely encrypted
        </p>
        <p>Copyright © 2025 Cooshey Cake n' Arts. All rights reserved.</p>
      </div>
    </footer>

    <script src="payment-proof.js"></script>
  </body>
</html>
